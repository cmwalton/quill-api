# Quill API

Backend API for the Quill writing application. Built with FastAPI and designed for deployment on Render.

## Features

- AI-powered writing assistance using Anthropic's Claude models
- User authentication and authorization
- Subscription and credit-based billing with Stripe
- License-based desktop app activation
- CORS configured for Electron desktop apps

## Deployment on Render

### Prerequisites

1. A Render account
2. Anthropic API key
3. (Optional) Stripe API keys for payment features

### Environment Variables

Set these environment variables in your Render service:

- `ANTHROPIC_API_KEY` - Your Anthropic API key (required)
- `SECRET_KEY` - JWT secret key (auto-generated by Render)
- `STRIPE_SECRET_KEY` - Stripe secret key (optional)
- `STRIPE_PUBLISHABLE_KEY` - Stripe publishable key (optional)
- `STRIPE_WEBHOOK_SECRET` - Stripe webhook secret (optional)
- `ENVIRONMENT` - Set to "production" (auto-configured)

### Deploy to Render

1. Connect your GitHub repository to Render
2. Use the `render.yaml` configuration file for automatic deployment
3. Or manually create a Web Service with these settings:
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `uvicorn main:app --host 0.0.0.0 --port $PORT`

### Local Development

1. Copy `.env.example` to `.env` and fill in your API keys
2. Install dependencies: `pip install -r requirements.txt`
3. Run the server: `uvicorn main:app --reload`

## API Endpoints

- `GET /health` - Health check
- `POST /auth/register` - User registration
- `POST /auth/login` - User login
- `POST /auth/desktop` - Desktop app authentication
- `POST /auth/license` - License-based authentication
- `POST /ai/{tool}` - AI assistance (brainstorm, edit, complete)
- `GET /ai/models` - Available AI models
- `POST /subscriptions/create` - Create Stripe subscription
- `POST /credits/purchase` - Purchase credits

## Production Notes

- Update CORS origins in `main.py` for your production domains
- Replace mock user database with a real database
- Implement proper password hashing for user accounts
- Add rate limiting and request validation
- Configure logging and monitoring
